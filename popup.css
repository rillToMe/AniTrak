:root[data-theme="light"]{
  --bg:#f7f7f8;
  --card:#ffffff;
  --surface:#f1f3f5;
  --text:#0b0b0c;
  --muted:#6b7280;
  --border:#e4e7ec;
  --input:#ffffff;
  --neon:#60a5fa;
  --focus:rgba(96,165,250,.45);
}

:root[data-theme="dark"]{
  --bg:#0a0a0a;
  --card:#111315;
  --surface:#0d0f11;
  --text:#e6e8eb;
  --muted:#98a1ab;
  --border:#23262b;
  --input:#0c0e10;
  --neon:#60a5fa;
  --focus:rgba(96,165,250,.35);
}

*{
  box-sizing:border-box;
}

html,body{
  color-scheme:light dark;
}

html,body{
  margin:0;
  padding:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  width:380px;
  min-height:560px;
}

:focus-visible{
  outline:2px solid var(--focus);
  outline-offset:2px;
  border-radius:10px;
}

.topbar{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-bottom:1px solid var(--border);
  background:var(--surface);
}

.topbar .logo{
  width:24px;
  height:24px;
}

.topbar h1{
  margin:0;
  font-size:16px;
  font-weight:700;
  letter-spacing:.3px;
}

.spacer{
  flex:1;
}

.theme-mini{
  display:flex;
  gap:6px;
}

.tbtn, .gear{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:6px 8px;
  cursor:pointer;
  transition:box-shadow .15s ease, border-color .15s ease, transform .03s ease;
}

.tbtn:hover, .gear:hover{
  box-shadow:0 0 10px 0 var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

.tbtn:active, .gear:active{
  transform:translateY(1px);
}

.controls{
  display:flex;
  gap:8px;
  align-items:center;
  padding:10px;
  background:var(--surface);
  border-bottom:1px solid var(--border);
}

.controls input{
  flex:1;
  background:var(--input);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px 10px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.02);
}

.controls input::placeholder{
  color:var(--muted);
}

.btn, .actions button, menu .primary{
  background:linear-gradient(180deg, var(--card), var(--surface));
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:8px 12px;
  cursor:pointer;
  transition:box-shadow .15s ease, border-color .15s ease, transform .03s ease;
}

.btn.neon{
  box-shadow:0 0 0 rgba(0,0,0,0);
}

.btn:hover, .actions button:hover, menu .primary:hover{
  box-shadow:0 0 12px var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

.btn:active, .actions button:active, menu .primary:active{
  transform:translateY(1px);
}

.btn.tiny{
  padding:4px 8px;
  border-radius:10px;
  font-size:12px;
}

.grid{
  background:var(--surface);
  border-top:1px solid var(--border);
  min-height:120px;
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
  padding:10px;
}

.grid:empty::before{
  content:"Belum ada series. Klik 'Tambah' untuk mulai.";
  display:block;
  color:var(--muted);
  padding:16px;
}

.card{
  display:grid;
  grid-template-columns:110px 1fr;
  gap:10px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
}

.card .thumb{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:10px;
  border:1px solid var(--border);
}

.title-row{
  display:flex;
  align-items:center;
  gap:8px;
  justify-content:space-between;
}

.delete-btn{
  background:var(--card);
  color:#ef4444;
  border:1px solid var(--border);
  border-radius:10px;
  padding:6px 8px;
  cursor:pointer;
}

.delete-btn:hover{
  box-shadow:0 0 10px rgba(239,68,68,.4), inset 0 0 0 1px #ef4444;
  border-color:#ef4444;
}

.progress{
  display:flex;
  align-items:center;
  gap:8px;
}

.progress .bar{
  flex:1;
  height:8px;
  border:1px solid var(--border);
  border-radius:999px;
  overflow:hidden;
  background:#0b1220;
}

.progress .fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#3b82f6,#60a5fa,#93c5fd);
}

.progress .label{
  font-size:12px;
  color:var(--muted);
}

dialog{
  position:relative;
  padding:0;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--card);
  color:var(--text);
  width:min(92vw, 560px);
  max-height:84vh;
  overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.45);
}

dialog::backdrop{
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(2px);
}

dialog h3{
  margin:0;
  padding:14px 16px 6px 16px;
  font-size:18px;
}

#newSeriesForm, #detailForm{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
  padding:0 16px 14px 16px;
  max-height:calc(84vh - 0px);
  overflow:auto;
  scrollbar-gutter:stable both-edges;
  padding-right:22px;
}

#newSeriesForm label, #detailForm label{
  display:grid;
  gap:6px;
  font-size:13px;
  color:var(--text);
}

#newSeriesForm input, #detailForm input{
  width:100%;
  background:var(--input);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px 10px;
}

#newSeriesForm input::placeholder, #detailForm input::placeholder{
  color:var(--muted);
}

#newSeriesForm details, #detailForm details{
  margin-top:2px;
  border:1px solid var(--border);
  border-radius:10px;
  background:var(--surface);
  padding:8px 10px;
}

#newSeriesForm summary, #detailForm summary{
  cursor:pointer;
  font-weight:600;
}

#newSeriesForm menu, #detailForm menu{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  padding:12px 16px;
  margin:0;
  background:var(--surface);
  border-top:1px solid var(--border);
}

.dlg-title{
  margin:0;
  padding:14px 16px 8px 16px;
  font-size:18px;
}

.dlg-close{
  position:absolute;
  top:12px;
  right:18px;
  z-index:3;
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:6px 8px;
  cursor:pointer;
  transition:box-shadow .15s, border-color .15s, transform .03s;
}

.dlg-close:hover{
  box-shadow:0 0 12px var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

.dlg-close:active{
  transform:translateY(1px);
}

.detail-head{
  display:grid;
  grid-template-columns:84px 1fr;
  gap:12px;
  align-items:start;
}

#dThumb{
  width:84px;
  height:84px;
  object-fit:cover;
  border-radius:10px;
  border:1px solid var(--border);
  background:#000;
}

.detail-meta .btnrow{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:6px;
}

.btn.small{
  padding:6px 8px;
  font-size:12px;
  border-radius:10px;
}

.episodes-wrap{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.ep-pager{
  position:sticky;
  top:0;
  z-index:2;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:0 2px 8px rgba(0,0,0,.12);
}

.ep-pager .left, .ep-pager .right{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:wrap;
}

.ep-pager .mr8{
  margin-right:8px;
}

.ep-range{
  width:90px;
  background:var(--input);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:6px 8px;
}

.episodes-grid-inner{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:10px;
}

@media (min-width: 520px){
  .episodes-grid-inner{
    grid-template-columns:repeat(3, minmax(0,1fr));
  }
}

.ep-card{
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px 12px;
  cursor:pointer;
  transition:background .15s, border-color .15s, box-shadow .15s;
}

.ep-card:hover{
  background:rgba(96,165,250,.08);
  box-shadow:0 0 0 1px var(--neon) inset;
  border-color:var(--neon);
}

.ep-left{
  color:var(--text);
}

.ep-left b{
  font-weight:800;
}

.ep-check{
  width:20px;
  height:20px;
  accent-color:var(--neon);
}

.ep-row{
  display:grid;
  grid-template-columns:70px 1fr 24px;
  gap:8px;
  align-items:center;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px;
}

.ep-row .num{
  font-weight:600;
  color:var(--muted);
}

.ep-row input[type="text"]{
  background:var(--input);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:7px 9px;
}

.ep-row input[type="checkbox"]{
  width:18px;
  height:18px;
}

@media (min-width: 480px){
  #newSeriesForm, #detailForm{
    grid-template-columns:1fr 1fr;
  }
  
  #newSeriesForm > label:nth-of-type(1),
  #newSeriesForm > label:nth-of-type(2),
  #detailForm > .detail-head,
  #detailForm > label:nth-of-type(1),
  #detailForm > label:nth-of-type(2),
  #newSeriesForm details,
  #detailForm details{
    grid-column:1 / -1;
  }
}

#genDlg{
  position:relative;
  border:1px solid var(--border);
  border-radius:16px;
  background:var(--card);
  color:var(--text);
  width:min(92vw, 560px);
  max-height:84vh;
  overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.45);
}

#genDlg::backdrop{
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(2px);
}

#genDlg .dlg-title{
  margin:0;
  padding:16px 16px 6px 16px;
  font-size:20px;
  font-weight:800;
}

#genDlg .dlg-close, #gClose{
  position:absolute;
  top:12px;
  right:18px;
  z-index:3;
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:12px;
  padding:6px 8px;
  cursor:pointer;
  transition:box-shadow .15s, border-color .15s, transform .03s;
}

#genDlg .dlg-close:hover, #gClose:hover{
  box-shadow:0 0 12px var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

#genDlg .dlg-close:active, #gClose:active{
  transform:translateY(1px);
}

#genForm{
  display:grid;
  gap:14px;
  padding:0 16px 14px 16px;
  max-height:calc(84vh - 0px);
  overflow:auto;
  scrollbar-gutter:stable both-edges;
  padding-right:22px;
}

#genForm .g-quick{
  display:grid;
  gap:8px;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px 12px;
}

#genForm .g-quick .muted{
  font-size:12px;
  color:var(--muted);
}

#genForm .chiprow{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

#genForm .chip{
  background:var(--card);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:999px;
  padding:8px 12px;
  cursor:pointer;
  transition:box-shadow .15s, border-color .15s, transform .03s;
}

#genForm .chip:hover{
  box-shadow:0 0 10px var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

#genForm .chip:active{
  transform:translateY(1px);
}

#genForm .chip.is-active{
  border-color:var(--neon);
  box-shadow:0 0 0 2px rgba(96,165,250,.25), inset 0 0 0 1px var(--neon);
}

#genForm label{
  display:grid;
  gap:6px;
  font-size:13px;
}

#genForm input{
  background:var(--input);
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  padding:8px 10px;
}

#genForm input::placeholder{
  color:var(--muted);
}

#genForm input:disabled{
  opacity:.6;
  cursor:not-allowed;
  filter:saturate(.7);
}

#genForm small.muted{
  color:var(--muted);
  font-size:12px;
  line-height:1.35;
}

#genForm small.muted b{
  color:var(--text);
}

#genForm menu{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  padding:12px 0 0 0;
  margin:0;
  border-top:1px solid var(--border);
}

#genForm menu button{
  background:linear-gradient(180deg, var(--card), var(--surface));
  border:1px solid var(--border);
  border-radius:12px;
  padding:8px 12px;
  transition:box-shadow .15s, border-color .15s, transform .03s;
}

#genForm menu button:hover{
  box-shadow:0 0 12px var(--neon), inset 0 0 0 1px var(--neon);
  border-color:var(--neon);
}

#genForm menu button:active{
  transform:translateY(1px);
}